<mat-toolbar color="primary">
	<button mat-icon-button
			color="accent"
			class="example-icon"
			aria-label="Example icon-button with menu icon">
		<mat-icon>menu</mat-icon>
	</button>
	<img src="./assets/images/logo161x20.png"
		 alt="The official bookmarks logo featuring a teal bookmark icon to the left of the stylized lowercase text bookmarx in teal color, set against a clean background."
		 aria-label="Bookmarks Logo">
	<span class="example-spacer"></span>
	<button mat-icon-button
			color="accent"
			class="example-icon favorite-icon"
			aria-label="Example icon-button with heart icon">
		<mat-icon>favorite</mat-icon>
	</button>
	<button mat-icon-button
			color="accent"
			[matMenuTriggerFor]="menu"
			aria-label="Example icon-button with a menu">
		<mat-icon>more_vert</mat-icon>
	</button>
	<mat-menu #menu="matMenu">
		<button mat-menu-item
				(click)="SignOut()">
			<mat-icon>exit_to_app</mat-icon>
			<span>Log Out</span>
		</button>
	</mat-menu>
</mat-toolbar>
<div class="mat-flex">
	<div class="file-explorer__wrapper"
		 [style.width.px]="FileExplorerWidthPX">
		<mat-list cdkDropList
				  class="example-list"
				  [cdkDropListData]="BookmarkCollections"
				  (cdkDropListDropped)="HandleDrop($event)">
			<!-- <ng-container *ngFor="let collection of BookmarkCollections"> -->
			<mat-list-item cdkDrag
						   *ngFor="let collection of BookmarkCollections"
						   matRipple
						   class="example-box"
						   [cdkDragData]="collection"
						   (cdkDragStarted)="HandleDragStart($event, collection)"
						   (click)="OpenBookmarkCollection($event, collection)"
						   (dblclick)="HandleDoubleClick($event, collection)"
						   [style.padding-left.px]="collection.Depth * 20"
						   [ngStyle]="{
						'height': collection.IsCollapsed ? '0px' : 'auto',
						'min-height': collection.IsCollapsed ? '0' : 'auto',
						'padding-top': collection.IsCollapsed ? '0' : '5px',
						'padding-bottom': collection.IsCollapsed ? '0' : '5px',
						'border-bottom': collection.IsCollapsed ? 'none' : 'solid 1px #ccc'
						}">
				<div class="file-explorer__item">
					<div>
						<button mat-icon-button
								aria-label="Example icon button with a vertical three dot icon"
								(click)="ToggleTree(collection, !collection.ChildCollectionsCollapsed)"
								[style.margin-left.px]="-20"
								*ngIf="collection.HasChildren">
							<ng-container *ngIf="!collection.ChildCollectionsCollapsed">
								<mat-icon aria-hidden="false"
										  aria-label="Example home icon">keyboard_arrow_down</mat-icon>
							</ng-container>
							<ng-container *ngIf="collection.ChildCollectionsCollapsed">
								<mat-icon aria-hidden="false"
										  aria-label="Example home icon">keyboard_arrow_right</mat-icon>
							</ng-container>
						</button>
						<p class="mat-text-nowrap">
							<span [innerHTML]="collection.Icon"></span>&nbsp;
							<span>{{collection.Title}}</span>&nbsp;
						</p>
					</div>
					<div>
						<span class="collections__bookmark-count">{{collection.Bookmarks?.length}}</span>
					</div>
				</div>
			</mat-list-item>
			<mat-divider></mat-divider>
		</mat-list>
	</div>
	<div class="file-explorer__handle"
		 (mousedown)='OnResizableClick($event)'
		 role="separator"
		 aria-label="Resize file explorer"
		 tabindex="0"
		 aria-grabbed="false">
	</div>
	<div class="bookmarks__output">
		<button type="button"
				(click)="ImportExistingBookmarks()">Import existing bookmarks</button>
		<button type="button"
				(click)="ClearBookmarks()">Clear all</button>
		<hr />
		<ng-container *ngIf="!ActiveCollection?.Bookmarks?.length">
			<p>No saved bookmarks.</p>
		</ng-container>
		<ng-container *ngIf="ActiveCollection?.Bookmarks?.length">
			<div>
				<div class="bookmarks__header">
					<p>{{ActiveCollection?.Title}}</p>
					<span>{{ActiveCollection?.Bookmarks?.length}}</span>
				</div>
				<hr />
				<div *ngFor="let bookmark of ActiveCollection?.Bookmarks">
					<a [href]="SanitizeUrl(bookmark.Url)"
					   target="_blank">
						{{bookmark.Title}}
					</a>
					<mat-divider></mat-divider>
				</div>
			</div>
		</ng-container>
	</div>
</div>